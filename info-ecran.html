<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Informations Centre</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>

body{
  margin:0;
  background:#111;
  font-family:'Montserrat',sans-serif;
  color:white;
}

/* ===== HEADER ===== */

header{
  height:70px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#000;
  position:relative;
}

header img{
  position:absolute;
  left:20px;
  height:40px;
  filter: brightness(0) invert(1) drop-shadow(0 0 4px rgba(255,255,255,0.6));
}

header h1{
  font-size:22px;
  margin:0;
}

/* ===== CONTAINER ===== */

.container{
  padding:20px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:20px;
}

/* ===== CARD ===== */

.card{
  background:#1a1a1a;
  border-radius:18px;
  padding:18px;
  box-shadow:0 0 15px rgba(255,255,255,0.05);
}

.card-top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.card-title{
  font-size:22px;
  font-weight:700;
}

.card-top img{
  width:32px;
}

.row{
  margin-top:12px;
}

.label{
  color:#aaa;
  font-size:13px;
}

.value{
  font-size:18px;
  font-weight:600;
}

.info{
  margin-top:10px;
  font-size:14px;
  color:#E88B00;
}

/* ===== COLORS ===== */

.green{color:#5cb85c;}
.red{color:#d9534f;}
.orange{color:#E88B00;}
.gray{color:#aaa;}

</style>
</head>

<body>

<header>
  <img src="image/logo.png">
  <h1>INFORMATIONS ESPACES</h1>
</header>

<div class="container" id="container"></div>

<script>

const SHEET_URL="https://opensheet.elk.sh/1-VbRioKfM6JHU-Oep0pa6H3S0VVuvYLyUMXTdSdRbzI/statuts";
const REFRESH=60000;

function colorStatut(s){
  if(s==="ouvert") return "green";
  if(s==="ferme") return "red";
  if(s==="prevision") return "orange";
  return "gray";
}

function labelStatut(s){
  if(s==="ouvert") return "OUVERT";
  if(s==="ferme") return "FERMÉ";
  if(s==="prevision") return "OUVERTURE PRÉVUE";
  return "HORS SERVICE";
}

function titre(espace){
  const map={
    "carriere":"Carrière",
    "manege":"Manège",
    "maison":"Maison",
    "grande-voie":"Grande voie",
    "beudot":"Beudot"
  };
  return map[espace] || espace;
}

function load(){

fetch(SHEET_URL,{cache:"no-store"})
.then(r=>r.json())
.then(data=>{

  const c=document.getElementById("container");
  c.innerHTML="";

  data.forEach(e=>{

    const special = e.horaire_special && String(e.horaire_special).trim()!=="";
    const horaire = special ? e.horaire_special : e.horaire_affiche;

    const card=document.createElement("div");
    card.className="card";

    card.innerHTML=`
      <div class="card-top">
        <div class="card-title">${titre(e.espace)}</div>
        <div class="value ${colorStatut(e.statut_auto)}">
          ${labelStatut(e.statut_auto)}
        </div>
      </div>

      <div class="row">
        <div class="label">Horaires</div>
        <div class="value ${special?"orange":""}">${horaire||"--"}</div>
      </div>

      <div class="info">${e.info||""}</div>
    `;

    c.appendChild(card);

  });

});
}

load();
setInterval(load,REFRESH);

</script>

</body>
</html>