<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Alertes</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#f4f4f4;
  margin:0;
  padding:20px;
}

h1{
  text-align:center;
}

.card{
  background:white;
  padding:15px;
  border-radius:12px;
  margin-bottom:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
  cursor:pointer;
}

.time{
  color:#d32f2f;
  font-weight:bold;
}

.cat{
  font-size:13px;
  opacity:0.7;
}

.title{
  font-size:18px;
  font-weight:bold;
}
</style>
</head>

<body>

<h1>ALERTES</h1>
<div id="list"></div>

<script>
const URL = "https://script.googleusercontent.com/macros/echo?user_content_key=AY5xjrRY09nECq5kqJEPaFCkMRnR4qbM-Z9y5KOMgVdlakJAA_L1FlwHMDN84Nstw8qXhqpt9QHGCeU6Sr6aLk3y7hSeA-1vr_eBBQYFwVL111h-CJZc8JxRQKvcu3XE7Gg-OXbXE8Vkp1PlAMHAkhJduQw6bxUswIvR7b1rA8txQ2Rtyl25eNxQWvtBet3bytcH6RpMKvJdyZcSioOtKa5sYL4uRI4FOoFrfUzX5P_pjpK-cAN8Bdf6otVcK4myQl66GohjWiPVOyCuofXOq8M4lQkmsxucwQ&lib=MfQh9XKIUpdlMRcOJ4l9JImAGFOlNCMp3";

fetch(URL)
.then(r => r.json())
.then(data => {

  const list = document.getElementById("list");
  list.innerHTML = "";

  data.forEach(n => {

    if(n.active !== "oui") return;

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <div class="time">${n.heure}</div>
      <div class="cat">${n.categorie}</div>
      <div class="title">${n.titre}</div>
    `;

    card.onclick = () => {
      window.location.href = "detail.html?id=" + n.id;
    };

    list.appendChild(card);
  });

})
.catch(err=>{
  document.getElementById("list").innerHTML="Erreur chargement";
  console.error(err);
});
</script>

</body>
</html>
